# Next.js Project Guide

This guide provides a comprehensive overview of using Next.js, highlighting key features, important considerations, and best practices.

## Table of Contents

- [Project Initialization](#project-initialization)
- [Pre-rendering](#pre-rendering)
- [Components in Next.js](#components-in-next-js)
  - [Server Components](#server-components)
  - [Client Components](#client-components)
- [Class Components](#class-components)
- [Routing](#routing)
  - [Nested Routing](#nested-routing)
- [Layouts](#layouts)
  - [Default Layout](#default-layout)
  - [Custom Layout](#custom-layout)
- [Naming Conventions](#naming-conventions)
- [Link Routing and Active Class](#link-routing-and-active-class)
- [API Handling](#api-handling)
- [Reserved Keywords](#reserved-keywords)
- [Handling Images](#handling-images)
  - [Remote Images](#remote-images)
  - [Local Images](#local-images)
- [Using Aliases](#using-aliases)

---

## Project Initialization

To start a new Next.js project, run:

```bash
npx create-next-app@latest
```

You'll be prompted with several options:

1. **Project name:** Provide the name for your project (e.g., `my-next-app`).
2. **TypeScript:** Choose `y` for TypeScript or `N` for JavaScript.
3. **ESLint:** Choose `y` if you want ESLint for code quality.
4. **Tailwind CSS:** Select `y` to include Tailwind CSS.
5. **`src/` directory:** Choose `y` to organize code in the `src/` folder.
6. **App Router (recommended):** Select `y` to use Next.js 13's new routing system.
7. **Import alias:** Optionally customize aliases for cleaner imports (e.g., `@/*` for `src/`).

After configuration, dependencies are installed, and you can start the dev server with:

```bash
cd my-next-app
npm run dev
```

Your project is now ready, and you can access it at `http://localhost:3000`.

```bash
npx create-next-app@latest
```

## Pre-rendering

Next.js pre-renders content by generating HTML on the server, which provides better performance and SEO optimization.

## Components in Next.js

Next.js offers two types of components:

### Server Components

- Rendered server-side and returned as HTML with minimal JavaScript.
- Benefits:
  - Secure: Tokens remain on the server.
  - Reduced resources due to API calls being handled server-side.
  - SEO optimized.

### Client Components

- Rendered on the client-side (browser) but created on the server.
- Benefits:
  - Handles browser interactions, DOM manipulations, and React hooks (like `useState`).
  - Heavier JavaScript bundle compared to server components.

When using forms (e.g., with `useFormik`), break down large pages into smaller components to optimize client and server rendering.

### Key Differences Between React and Next.js

- In React, all components are client-side, while Next.js supports both server and client components.

## Class Components

Next.js supports class components, but they are always treated as client components. By default, Next.js components are server components unless specified otherwise.

To make a component client-side, add the directive:

```javascript
"use client";
```

## Routing

Routing in Next.js is based on the folder structure and is case-sensitive.

- Files named `page.js` represent routes.
- Example: `app/folder-name/page.js` creates a route accessible at `/folder-name`.

### Nested Routing

Nested routes can be created by nesting folders:

```
app/one/two/page.js -> This creates the route `/one/two`.
```

## Layouts

Layouts in Next.js serve as a parent component for other pages, similar to `Outlet` in React.

### Default Layout

By default, Next.js includes a global layout in `layout.js` that applies to all pages.

### Custom Layout

You can create custom layouts for specific pages or groups of pages.

### Metadata in Layouts

You can define metadata in the layout file for SEO purposes:

```javascript
export const metadata = {
  title: "Create Next App",
  description: "Generated by create next app",
};
```

## Naming Conventions

- Components: Use CamelCase.
- Page folders: Start with lowercase letters.
- Dependency folders: Start with an underscore (`_`) to exclude them from routes.

Example folder structure:

```
_Components/
auth/login/page.js -> Accessible at /login
auth/register/page.js -> Accessible at /register
```

## Link Routing and Active Class

Use the `Link` component for navigation:

```jsx
<Link href="/path">Link</Link>
```

To manage active links:

1. Use `usePathname` from `next/navigation` to get the current path.
2. Add the `active` class manually based on the current path.

## API Handling

API calls in Next.js are handled server-side, so there's no need to use `useEffect` for fetching data. This allows pages to display pre-fetched data from the server.

Next.js allows server components to be asynchronous, enabling data fetching before rendering:

```javascript
export default async function Page() {
  const data = await getData();
  return (
    <div>
      {data.map((item) => (
        <div key={item.id}>{item.name}</div>
      ))}
    </div>
  );
}
```

Next.js also caches API responses to optimize performance.

## Reserved Keywords

- `not-found.js`: Create a `not-found.js` file in the `app` folder for custom 404 pages.

## Handling Images

### Remote Images

Use the `Image` component for handling remote images:

```jsx
<Image
  src="https://example.com/image.jpg"
  alt="Example Image"
  width={400}
  height={300}
/>
```

- You must specify the width and height for proper aspect ratio handling.
- Add remote image sources to the `next.config.js` for security:

```javascript
const nextConfig = {
  images: {
    remotePatterns: [
      {
        protocol: "https",
        hostname: "example.com",
        pathname: "/images/*",
      },
    ],
  },
};
```

### Local Images

- Use the `public` folder for static images.
- The `Image` component supports dynamic image imports, optimizes image size, and applies lazy loading.

## Using Aliases

Set up path aliases in `jsconfig.json` or `tsconfig.json`:

```json
{
  "compilerOptions": {
    "paths": {
      "@/*": ["./src/*"]
    }
  }
}
```

This allows you to use `@` as a shortcut to reference files within the `src` folder.
